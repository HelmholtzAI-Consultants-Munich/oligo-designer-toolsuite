#######################
### USER PARAMETERS ###
#######################

### General parameters
### -----------------------------------------------
n_jobs: 4 # number of cores used to run the pipeline and 2*n_jobs +1 of regions that should be stored in cache. If memory consumption of pipeline is too high reduce this number, if a lot of RAM is available increase this number to decrease runtime
dir_output: output_cyclehcr_probe_designer # name of the directory where the output files will be written
write_intermediate_steps: true # if true, writes the oligo sequences after each step of the pipeline into a csv file
top_n_sets: 3 #maximum number of sets to report in padlock_probes.yaml and "padlock_probes_order.yaml"


### Target Probe Parameters
### -----------------------------------------------
file_regions: data/genes/custom_3.txt # file with a list the genes used to generate the probe sequences, leave empty if all the genes are used
files_fasta_target_probe_database: # fasta file with sequences form which the probes should be generated. Hint: use the genomic_region_generator pipeline to create fasta files of genomic regions of interest
  - data/genomic_regions/exon_annotation_source-NCBI_species-Homo_sapiens_annotation_release-110_genome_assemly-GRCh38.fna
  - data/genomic_regions/exon_exon_junction_annotation_source-NCBI_species-Homo_sapiens_annotation_release-110_genome_assemly-GRCh38.fna
files_fasta_reference_database_targe_probe: # fasta file with sequences used as reference for the specificity filters. Hint: use the genomic_region_generator pipeline to create fasta files of genomic regions of interest
  - data/genomic_regions/gene_annotation_source-NCBI_species-Homo_sapiens_annotation_release-110_genome_assemly-GRCh38.fna
  - data/genomic_regions/intron_annotation_source-NCBI_species-Homo_sapiens_annotation_release-110_genome_assemly-GRCh38.fna
target_probe_isoform_consensus: 0 #min isoform consesnsus for probes, i.e. how many transcripts of the total number of transcripts of a gene are covered by the probe, given in %
target_probe_left_probe_sequence_length: 45 # L + spacer + R sequence should equal the total probe length, e.g. 45 + 2 + 45 = 92
target_probe_gap_sequence_length: 2 # gap between L and R probe sequences
target_probe_right_probe_sequence_length: 45 # L + spacer + R sequence should equal the total probe length, e.g. 45 + 2 + 45 = 92
target_probe_GC_content_min: 30 # minimum GC content of oligos
target_probe_GC_content_max: 90 # maximum GC content of oligos
target_probe_Tm_min: 90 # minimum melting temperature of oligos
target_probe_Tm_max: 200 # maximum melting temperature of oligos
target_probe_homopolymeric_base_n: # minimum number of nucleotides to consider it a homopolymeric run per base
  A: 6
  T: 6
  C: 6
  G: 6
target_probe_T_secondary_structure: 76 # Temperature at which the free energy is calculated
target_probe_secondary_structures_threshold_deltaG: 0 # threshold for the secondary structure free energy -> oligo rejected if it presents a structure with a negative free energy at the defined temperature
target_probe_Tm_weight: 1 # weight of the Tm of the probe in the efficiency score
target_probe_isoform_weight: 1 # weight of the Tm of the probe in the efficiency score
set_size_min: 10 # minimum size of probe sets (in case there exist no set of the optimal size) -> genes with less oligos will be filtered out and stored in regions_with_insufficient_oligos_for_db_probes
set_size_opt: 25 # optimal size of probe sets
distance_between_target_probes: 2 # how much overlap should be allowed between oligos, e.g. if oligos can overlpap x bases choose -x, if oligos can be next to one another choose 0, if oligos should be x bases apart choose x
n_sets: 100 # maximum number of sets to generate


### Readout Probe Parameters
### -----------------------------------------------
files_fasta_readout_probe_database:
- 


### Primer Parameters
### -----------------------------------------------
forward_primer_sequence: TAATACGACTCACTATAGCGTCATC # defaults to T7 promoter sequence, change if different sequence desired
reverse_primer_sequence: CGACACCGAACGTGCGACAA # defaults to oligo sequence, change if different sequence desired

############################
### DEVELOPER PARAMETERS ###
############################

### Target Probe Parameters
### -----------------------------------------------
# Specificity filter with BlastN
target_probe_specificity_blastn_search_parameters:
  perc_identity: 80
  strand: "minus" # this parameter is fixed, if reference is whole genome, consider using "both"
  word_size: 10
  dust: "no"
  soft_masking: "false"
  max_target_seqs: 10
  max_hsps: 1000
target_probe_specificity_blastn_hit_parameters:
  min_alignment_length: 17 # can be turned into coverage
# Crosshybridization filter with BlastN
target_probe_cross_hybridization_blastn_search_parameters:
  perc_identity: 80
  strand: "minus" # this parameter is fixed
  word_size: 7
  dust: "no"
  soft_masking: "false"
  max_target_seqs: 10
target_probe_cross_hybridization_blastn_hit_parameters:
  min_alignment_length: 17 # can be turned into coverage
# Parameters for the Oligo set selection
max_graph_size: 5000 # maximum number of oligos that are taken into consisderation in the last step (5000 -> ~5GB, 2500 -> ~1GB)
n_attempts: 100000 # number of attempts to find the optimal set of oligos
heuristic: true # apply heuristic pre-search to reduce search space and runtime of oligo set selection
heuristic_n_attempts: 100 # number of attempts to find the optimal set of oligos for heuristic pre-search
# Parameters for Melting Temperature
# The melting temperature is used in 2 different stages (property filters and padlock detection probe design), where a few parameters are shared and the others differ.
# parameters for melting temperature -> for more information on parameters, see: https://biopython.org/docs/1.75/api/Bio.SeqUtils.MeltingTemp.html#Bio.SeqUtils.MeltingTemp.Tm_NN
target_probe_Tm_parameters:
  nn_table: DNA_NN3 # default
  tmm_table: DNA_TMM1 # default
  imm_table: DNA_IMM1 # default
  de_table: DNA_DE1 # default
  dnac1: 25 #[nM] 
  dnac2: 25 #[nM] 
  saltcorr: 0 # 
  Na: 50 #[mM] 
  K: 0 #[mM] default
  Tris: 0 #[mM] default
  Mg: 0 #[mM] default
  dNTPs: 0 #[mM] default
target_probe_Tm_chem_correction_parameters: null # if chem correction desired, please add parameters below
target_probe_Tm_salt_correction_parameters: null # if salt correction desired, please add parameters below



### Readout Probe Parameters
### -----------------------------------------------

### Primer Parameters
### -----------------------------------------------

